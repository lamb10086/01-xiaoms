{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getEatList } from \"@/api/xiaomengshu\";\nexport default {\n  name: \"MainCom\",\n  data() {\n    return {\n      leftCate: [],\n      rightCate: [],\n      choiceKind: 0,\n      active: 0,\n      keyword: \"\",\n      showAction: false,\n      searchList: []\n    };\n  },\n  computed: {\n    iconName() {\n      return this.$store.state.eaticonName;\n    },\n    iconColor() {\n      return this.$store.state.eaticonColor;\n    }\n  },\n  async created() {\n    await this.getleftCate();\n    this.getrightCate();\n    console.log(\"1-1-1-1-1-1-11-\");\n  },\n  watch: {\n    pet_type() {\n      this.getleftCate();\n      this.getrightCate();\n    },\n    active() {\n      this.choiceKind = this.leftCate[this.active];\n      this.getrightCate();\n      // console.log(this.choiceKind);\n    },\n\n    leftCate() {\n      this.changescreen();\n    }\n  },\n  methods: {\n    //获取左边列表\n    async getleftCate() {\n      let res = await getEatList({\n        pet_type: this.pet_type\n      });\n      this.leftCate = res.data.leftCate;\n      this.choiceKind = res.data.leftCate[0];\n      // console.log(this.choiceKind);\n    },\n\n    //获取右边列表\n    async getrightCate() {\n      let res = await getEatList({\n        pet_type: this.pet_type,\n        cid: this.choiceKind.cid,\n        etype: this.choiceKind.etype\n      });\n      this.rightCate = res.data.rightCate;\n    },\n    //调整高度\n    changescreen() {\n      let middleNav = document.querySelector(\".middle-nav\");\n      let ls = document.documentElement.clientHeight;\n      middleNav.style.height = ls - middleNav.offsetTop + \"px\";\n    },\n    //点击搜索框事件\n    async searching() {\n      let res = await getEatList({\n        do: \"Suggest\",\n        keyword: this.keyword\n      });\n      console.log(\"res:\", res);\n      // console.log(this.keyword);\n      this.searchList = res.data.list;\n    },\n    toPage(item) {\n      this.$router.push({\n        name: \"page\",\n        query: {\n          cid: item.cid\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["getEatList","name","data","leftCate","rightCate","choiceKind","active","keyword","showAction","searchList","computed","iconName","$store","state","eaticonName","iconColor","eaticonColor","created","getleftCate","getrightCate","console","log","watch","pet_type","changescreen","methods","res","cid","etype","middleNav","document","querySelector","ls","documentElement","clientHeight","style","height","offsetTop","searching","do","list","toPage","item","$router","push","query"],"sourceRoot":"","sources":["C:\\Users\\yangp\\Desktop\\01-xiaoms\\src\\views\\xiaomengshu\\ToolView\\Eat\\MainCom.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <van-search\r\n      v-model=\"keyword\"\r\n      placeholder=\"请输入搜索关键词\"\r\n      shape=\"round\"\r\n      @focus=\"this.showAction = true\"\r\n      @cancel=\"this.showAction = false\"\r\n      :show-action=\"showAction\"\r\n      @update:model-value=\"searching()\"\r\n    ></van-search>\r\n    <div class=\"middle-nav\">\r\n      <div class=\"show-nav\" v-show=\"showAction == false\">\r\n        <van-sidebar v-model=\"active\" class=\"left-nav\">\r\n          <van-sidebar-item v-for=\"item in leftCate\" :key=\"item.cid\">\r\n            <template #title>\r\n              <span>\r\n                <van-icon\r\n                  size=\"4vw\"\r\n                  :name=\"iconName[item.cid - 1]\"\r\n                  v-if=\"item.etype == 1\"\r\n                  :color=\"\r\n                    active == item.cid - 1 ? iconColor[item.cid - 1] : '#d3d3d3'\r\n                  \"\r\n                />\r\n                {{ item.title }}\r\n              </span>\r\n            </template>\r\n          </van-sidebar-item>\r\n        </van-sidebar>\r\n\r\n        <div class=\"right-nav\">\r\n          <van-cell-group v-for=\"item in rightCate\" :key=\"item.title\">\r\n            <template #title>\r\n              <van-icon\r\n                :name=\"iconName[item.cid - 1]\"\r\n                v-if=\"item.etype == 1\"\r\n                size=\"4vw\"\r\n                :color=\"iconColor[item.cid - 1]\"\r\n              />\r\n              {{ item.title }}\r\n            </template>\r\n            <van-cell>\r\n              <van-grid :column-num=\"3\" :border=\"false\" icon-size=\"18vw\">\r\n                <van-grid-item\r\n                  v-for=\"food in item.child\"\r\n                  :key=\"food.cid\"\r\n                  :icon=\"food.pic\"\r\n                  :text=\"food.title\"\r\n                  @click=\"toPage(food)\"\r\n                />\r\n              </van-grid>\r\n            </van-cell>\r\n          </van-cell-group>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"search-nav\" v-show=\"showAction == true\">\r\n        <van-cell-group>\r\n          <van-cell\r\n            v-for=\"item in searchList\"\r\n            :title=\"item.title\"\r\n            :key=\"item.cid\"\r\n            @click=\"toPage(item)\"\r\n          />\r\n        </van-cell-group>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getEatList } from \"@/api/xiaomengshu\";\r\nexport default {\r\n  name: \"MainCom\",\r\n  data() {\r\n    return {\r\n      leftCate: [],\r\n      rightCate: [],\r\n      choiceKind: 0,\r\n      active: 0,\r\n      keyword: \"\",\r\n      showAction: false,\r\n      searchList: [],\r\n    };\r\n  },\r\n  computed: {\r\n    iconName() {\r\n      return this.$store.state.eaticonName;\r\n    },\r\n    iconColor() {\r\n      return this.$store.state.eaticonColor;\r\n    },\r\n  },\r\n  async created() {\r\n    await this.getleftCate();\r\n    this.getrightCate();\r\n    console.log(\"1-1-1-1-1-1-11-\");\r\n  },\r\n  watch: {\r\n    pet_type() {\r\n      this.getleftCate();\r\n      this.getrightCate();\r\n    },\r\n    active() {\r\n      this.choiceKind = this.leftCate[this.active];\r\n      this.getrightCate();\r\n      // console.log(this.choiceKind);\r\n    },\r\n    leftCate() {\r\n      this.changescreen();\r\n    },\r\n  },\r\n  methods: {\r\n    //获取左边列表\r\n    async getleftCate() {\r\n      let res = await getEatList({ pet_type: this.pet_type });\r\n      this.leftCate = res.data.leftCate;\r\n      this.choiceKind = res.data.leftCate[0];\r\n      // console.log(this.choiceKind);\r\n    },\r\n    //获取右边列表\r\n    async getrightCate() {\r\n      let res = await getEatList({\r\n        pet_type: this.pet_type,\r\n        cid: this.choiceKind.cid,\r\n        etype: this.choiceKind.etype,\r\n      });\r\n      this.rightCate = res.data.rightCate;\r\n    },\r\n    //调整高度\r\n    changescreen() {\r\n      let middleNav = document.querySelector(\".middle-nav\");\r\n      let ls = document.documentElement.clientHeight;\r\n      middleNav.style.height = ls - middleNav.offsetTop + \"px\";\r\n    },\r\n    //点击搜索框事件\r\n    async searching() {\r\n      let res = await getEatList({ do: \"Suggest\", keyword: this.keyword });\r\n      console.log(\"res:\", res);\r\n      // console.log(this.keyword);\r\n      this.searchList = res.data.list;\r\n    },\r\n    toPage(item) {\r\n      this.$router.push({\r\n        name: \"page\",\r\n        query: {\r\n          cid: item.cid,\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.van-search {\r\n  height: 11vw;\r\n}\r\n\r\n.middle-nav {\r\n  .show-nav {\r\n    height: 100%;\r\n    display: flex;\r\n\r\n    .right-nav:extend(.left-nav) {\r\n      height: 100%;\r\n      flex: 1;\r\n      overflow: scroll;\r\n    }\r\n  }\r\n  .search-nav {\r\n    height: 100%;\r\n    background-color: white;\r\n  }\r\n}\r\n\r\n.van-sidebar-item {\r\n  color: #666666;\r\n  text-align: center;\r\n  font-size: 1.2rem;\r\n  padding: 3.2vw 0;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}