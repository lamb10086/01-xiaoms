{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getAbleList } from \"@/api/xiaomengshu\";\nexport default {\n  data() {\n    return {\n      searchValue: \"\",\n      searchList: []\n    };\n  },\n  inject: [\"able\"],\n  created() {\n    this.able.showTop = this.able.showSearch = false;\n  },\n  unmounted() {\n    this.able.showTop = this.able.showSearch = true;\n  },\n  computed: {\n    searchFocus() {\n      return this.searchValue == \"\";\n    },\n    recordList() {\n      return this.$store.state.ableRecordList;\n    }\n  },\n  methods: {\n    onClickLeft() {\n      this.$router.back();\n    },\n    deleteList() {\n      this.$store.state.ableRecordList = [];\n    },\n    async onSearch() {\n      let res = await getAbleList({\n        ...this.$route.query,\n        word: this.searchValue\n      });\n      this.searchList = res.data.list;\n    },\n    toPage1() {\n      if (this.recordList.indexOf(this.searchValue) == -1) this.recordList.push(this.searchValue);\n      if (this.recordList.length > 30) {\n        this.recordList.shift();\n      }\n      this.$router.push({\n        name: \"listPage1\",\n        query: {\n          pettype: this.$store.getters.pet_type,\n          word: this.searchValue\n        }\n      });\n      console.log(\"1-1-1-1-1-\");\n    }\n  }\n};","map":{"version":3,"mappings":";AAyCA,SAASA,WAAU,QAAS,mBAAmB;AAC/C,eAAe;EACbC,IAAI,GAAG;IACL,OAAO;MACLC,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE;IACd,CAAC;EACH,CAAC;EACDC,MAAM,EAAE,CAAC,MAAM,CAAC;EAChBC,OAAO,GAAG;IACR,IAAI,CAACC,IAAI,CAACC,OAAM,GAAI,IAAI,CAACD,IAAI,CAACE,UAAS,GAAI,KAAK;EAClD,CAAC;EACDC,SAAS,GAAG;IACV,IAAI,CAACH,IAAI,CAACC,OAAM,GAAI,IAAI,CAACD,IAAI,CAACE,UAAS,GAAI,IAAI;EACjD,CAAC;EACDE,QAAQ,EAAE;IACRC,WAAW,GAAG;MACZ,OAAO,IAAI,CAACT,WAAU,IAAK,EAAE;IAC/B,CAAC;IACDU,UAAU,GAAG;MACX,OAAO,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,cAAc;IACzC;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,WAAW,GAAG;MACZ,IAAI,CAACC,OAAO,CAACC,IAAI,EAAE;IACrB,CAAC;IACDC,UAAU,GAAG;MACX,IAAI,CAACP,MAAM,CAACC,KAAK,CAACC,cAAa,GAAI,EAAE;IACvC,CAAC;IACD,MAAMM,QAAQ,GAAG;MACf,IAAIC,GAAE,GAAI,MAAMtB,WAAW,CAAC;QAC1B,GAAG,IAAI,CAACuB,MAAM,CAACC,KAAK;QACpBC,IAAI,EAAE,IAAI,CAACvB;MACb,CAAC,CAAC;MACF,IAAI,CAACC,UAAS,GAAImB,GAAG,CAACrB,IAAI,CAACyB,IAAI;IACjC,CAAC;IACDC,OAAO,GAAG;MACR,IAAI,IAAI,CAACf,UAAU,CAACgB,OAAO,CAAC,IAAI,CAAC1B,WAAW,KAAK,CAAC,CAAC,EACjD,IAAI,CAACU,UAAU,CAACiB,IAAI,CAAC,IAAI,CAAC3B,WAAW,CAAC;MACxC,IAAI,IAAI,CAACU,UAAU,CAACkB,MAAK,GAAI,EAAE,EAAE;QAC/B,IAAI,CAAClB,UAAU,CAACmB,KAAK,EAAE;MACzB;MACA,IAAI,CAACb,OAAO,CAACW,IAAI,CAAC;QAChBG,IAAI,EAAE,WAAW;QACjBR,KAAK,EAAE;UACLS,OAAO,EAAE,IAAI,CAACpB,MAAM,CAACqB,OAAO,CAACC,QAAQ;UACrCV,IAAI,EAAE,IAAI,CAACvB;QACb;MACF,CAAC,CAAC;MACFkC,OAAO,CAACC,GAAG,CAAC,YAAY,CAAC;IAC3B;EACF;AACF,CAAC","names":["getAbleList","data","searchValue","searchList","inject","created","able","showTop","showSearch","unmounted","computed","searchFocus","recordList","$store","state","ableRecordList","methods","onClickLeft","$router","back","deleteList","onSearch","res","$route","query","word","list","toPage1","indexOf","push","length","shift","name","pettype","getters","pet_type","console","log"],"sourceRoot":"","sources":["C:\\Users\\yangp\\Desktop\\01-xiaoms\\src\\views\\xiaomengshu\\ToolView\\Able\\SearchPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"search-nav\">\r\n      <van-icon name=\"arrow-left\" size=\"2rem\" @click=\"onClickLeft()\" />\r\n      <van-search\r\n        v-model=\"searchValue\"\r\n        show-action\r\n        placeholder=\"请输入搜索关键词\"\r\n        @update:model-value=\"onSearch()\"\r\n        @cancel=\"onClickLeft()\"\r\n        shape=\"round\"\r\n      />\r\n    </div>\r\n    <div v-show=\"!searchFocus\">\r\n      <van-cell-group>\r\n        <van-cell\r\n          v-for=\"item in searchList\"\r\n          :title=\"item.title\"\r\n          :key=\"item.cid\"\r\n          @click=\"toPage1()\"\r\n        />\r\n      </van-cell-group>\r\n    </div>\r\n    <div v-show=\"searchFocus\">\r\n      <div class=\"record\">\r\n        <div class=\"record-left\">\r\n          <van-icon name=\"clock-o\" size=\"1.5rem\" />\r\n          <span><b>最近搜索</b> </span>\r\n        </div>\r\n        <div class=\"record-right\" @click=\"deleteList()\">\r\n          <van-icon name=\"delete-o\" size=\"2rem\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"record-list\">\r\n        <div v-for=\"item in recordList\" :key=\"item\">{{ item }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAbleList } from \"@/api/xiaomengshu\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchValue: \"\",\r\n      searchList: [],\r\n    };\r\n  },\r\n  inject: [\"able\"],\r\n  created() {\r\n    this.able.showTop = this.able.showSearch = false;\r\n  },\r\n  unmounted() {\r\n    this.able.showTop = this.able.showSearch = true;\r\n  },\r\n  computed: {\r\n    searchFocus() {\r\n      return this.searchValue == \"\";\r\n    },\r\n    recordList() {\r\n      return this.$store.state.ableRecordList;\r\n    },\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.back();\r\n    },\r\n    deleteList() {\r\n      this.$store.state.ableRecordList = [];\r\n    },\r\n    async onSearch() {\r\n      let res = await getAbleList({\r\n        ...this.$route.query,\r\n        word: this.searchValue,\r\n      });\r\n      this.searchList = res.data.list;\r\n    },\r\n    toPage1() {\r\n      if (this.recordList.indexOf(this.searchValue) == -1)\r\n        this.recordList.push(this.searchValue);\r\n      if (this.recordList.length > 30) {\r\n        this.recordList.shift();\r\n      }\r\n      this.$router.push({\r\n        name: \"listPage1\",\r\n        query: {\r\n          pettype: this.$store.getters.pet_type,\r\n          word: this.searchValue,\r\n        },\r\n      });\r\n      console.log(\"1-1-1-1-1-\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-nav {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-around;\r\n  .van-search {\r\n    flex: 1;\r\n  }\r\n  border-bottom: 1px solid #eeeeee;\r\n}\r\n.record {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 3vw 3vw;\r\n  height: 8vw;\r\n  span {\r\n    font-size: 1.3rem;\r\n  }\r\n}\r\n.record-list {\r\n  display: flex;\r\n  div {\r\n    margin: 2vw 1vw;\r\n    padding: 1vw 5vw;\r\n    border: 1px solid #eeeeee;\r\n    border-radius: 20px;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}