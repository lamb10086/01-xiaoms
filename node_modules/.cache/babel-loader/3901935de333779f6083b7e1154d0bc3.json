{"ast":null,"code":"import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { extend, inBrowser } from \"../utils/index.mjs\";\nimport { mountComponent, usePopupState } from \"../utils/mount-component.mjs\";\nimport Dialog from \"./Dialog.mjs\";\nlet instance;\nconst DEFAULT_OPTIONS = {\n  title: \"\",\n  width: \"\",\n  theme: null,\n  message: \"\",\n  overlay: true,\n  callback: null,\n  teleport: \"body\",\n  className: \"\",\n  allowHtml: false,\n  lockScroll: true,\n  transition: void 0,\n  beforeClose: null,\n  overlayClass: \"\",\n  overlayStyle: void 0,\n  messageAlign: \"\",\n  cancelButtonText: \"\",\n  cancelButtonColor: null,\n  cancelButtonDisabled: false,\n  confirmButtonText: \"\",\n  confirmButtonColor: null,\n  confirmButtonDisabled: false,\n  showConfirmButton: true,\n  showCancelButton: false,\n  closeOnPopstate: true,\n  closeOnClickOverlay: false\n};\nlet currentOptions = extend({}, DEFAULT_OPTIONS);\nfunction initInstance() {\n  const Wrapper = {\n    setup() {\n      const {\n        state,\n        toggle\n      } = usePopupState();\n      return () => _createVNode(Dialog, _mergeProps(state, {\n        \"onUpdate:show\": toggle\n      }), null);\n    }\n  };\n  ({\n    instance\n  } = mountComponent(Wrapper));\n}\nfunction showDialog(options) {\n  if (!inBrowser) {\n    return Promise.resolve();\n  }\n  return new Promise((resolve, reject) => {\n    if (!instance) {\n      initInstance();\n    }\n    instance.open(extend({}, currentOptions, options, {\n      callback: action => {\n        (action === \"confirm\" ? resolve : reject)(action);\n      }\n    }));\n  });\n}\nconst setDialogDefaultOptions = options => {\n  extend(currentOptions, options);\n};\nconst resetDialogDefaultOptions = () => {\n  currentOptions = extend({}, DEFAULT_OPTIONS);\n};\nconst showConfirmDialog = options => showDialog(extend({\n  showCancelButton: true\n}, options));\nconst closeDialog = () => {\n  if (instance) {\n    instance.toggle(false);\n  }\n};\nexport { closeDialog, resetDialogDefaultOptions, setDialogDefaultOptions, showConfirmDialog, showDialog };","map":{"version":3,"names":["createVNode","_createVNode","mergeProps","_mergeProps","extend","inBrowser","mountComponent","usePopupState","Dialog","instance","DEFAULT_OPTIONS","title","width","theme","message","overlay","callback","teleport","className","allowHtml","lockScroll","transition","beforeClose","overlayClass","overlayStyle","messageAlign","cancelButtonText","cancelButtonColor","cancelButtonDisabled","confirmButtonText","confirmButtonColor","confirmButtonDisabled","showConfirmButton","showCancelButton","closeOnPopstate","closeOnClickOverlay","currentOptions","initInstance","Wrapper","setup","state","toggle","showDialog","options","Promise","resolve","reject","open","action","setDialogDefaultOptions","resetDialogDefaultOptions","showConfirmDialog","closeDialog"],"sources":["C:/Users/yangp/Desktop/01-xiaoms/node_modules/vant/es/dialog/function-call.mjs"],"sourcesContent":["import { createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\r\nimport { extend, inBrowser } from \"../utils/index.mjs\";\r\nimport { mountComponent, usePopupState } from \"../utils/mount-component.mjs\";\r\nimport Dialog from \"./Dialog.mjs\";\r\nlet instance;\r\nconst DEFAULT_OPTIONS = {\r\n  title: \"\",\r\n  width: \"\",\r\n  theme: null,\r\n  message: \"\",\r\n  overlay: true,\r\n  callback: null,\r\n  teleport: \"body\",\r\n  className: \"\",\r\n  allowHtml: false,\r\n  lockScroll: true,\r\n  transition: void 0,\r\n  beforeClose: null,\r\n  overlayClass: \"\",\r\n  overlayStyle: void 0,\r\n  messageAlign: \"\",\r\n  cancelButtonText: \"\",\r\n  cancelButtonColor: null,\r\n  cancelButtonDisabled: false,\r\n  confirmButtonText: \"\",\r\n  confirmButtonColor: null,\r\n  confirmButtonDisabled: false,\r\n  showConfirmButton: true,\r\n  showCancelButton: false,\r\n  closeOnPopstate: true,\r\n  closeOnClickOverlay: false\r\n};\r\nlet currentOptions = extend({}, DEFAULT_OPTIONS);\r\nfunction initInstance() {\r\n  const Wrapper = {\r\n    setup() {\r\n      const {\r\n        state,\r\n        toggle\r\n      } = usePopupState();\r\n      return () => _createVNode(Dialog, _mergeProps(state, {\r\n        \"onUpdate:show\": toggle\r\n      }), null);\r\n    }\r\n  };\r\n  ({\r\n    instance\r\n  } = mountComponent(Wrapper));\r\n}\r\nfunction showDialog(options) {\r\n  if (!inBrowser) {\r\n    return Promise.resolve();\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    if (!instance) {\r\n      initInstance();\r\n    }\r\n    instance.open(extend({}, currentOptions, options, {\r\n      callback: (action) => {\r\n        (action === \"confirm\" ? resolve : reject)(action);\r\n      }\r\n    }));\r\n  });\r\n}\r\nconst setDialogDefaultOptions = (options) => {\r\n  extend(currentOptions, options);\r\n};\r\nconst resetDialogDefaultOptions = () => {\r\n  currentOptions = extend({}, DEFAULT_OPTIONS);\r\n};\r\nconst showConfirmDialog = (options) => showDialog(extend({\r\n  showCancelButton: true\r\n}, options));\r\nconst closeDialog = () => {\r\n  if (instance) {\r\n    instance.toggle(false);\r\n  }\r\n};\r\nexport {\r\n  closeDialog,\r\n  resetDialogDefaultOptions,\r\n  setDialogDefaultOptions,\r\n  showConfirmDialog,\r\n  showDialog\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}