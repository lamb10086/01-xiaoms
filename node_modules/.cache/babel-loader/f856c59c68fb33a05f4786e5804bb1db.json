{"ast":null,"code":"export default {\n  props: {\n    cid: {\n      type: Number,\n      default: 0\n    },\n    detailList: {\n      type: Array,\n      default: () => []\n    },\n    getAll: {\n      type: Number,\n      default: 0\n    }\n  },\n  inject: ['ids', 'no_ids'],\n  data() {\n    return {\n      allids: [],\n      showDialog: false,\n      showImg: {}\n    };\n  },\n  methods: {\n    changeCid(cid, index, type) {\n      // console.log(\"type:\", type)\n      if (type === 0) this.allids[index][0] = cid;else if (type === 1) {\n        let ls = this.allids[index].indexOf(cid);\n        if (ls == -1) this.allids[index].push(cid);else {\n          this.allids[index].splice(ls, 1);\n        }\n      } else if (type === 2) {\n        this.allids[index][0] = cid;\n        this.showDialog = false;\n      } else {\n        let ls = this.allids[index].indexOf(cid);\n        // console.log(\"ls:\", ls)\n        if (ls == -1) this.allids[index].push(cid);else {\n          this.allids[index].splice(ls, 1);\n        }\n        this.showDialog = false;\n      }\n    },\n    imgClass(cid, index) {\n      if (this.allids[index].indexOf(cid) != -1 || this.ids.indexOf(cid) != -1) return true;else return false;\n    },\n    changeImgCid(btn, index, type) {\n      if (this.imgClass(btn.cid, index)) {\n        this.changeCid(btn.cid, index, btn.type);\n        return;\n      }\n      this.showDialog = true;\n      this.showImg = {\n        ...btn,\n        index,\n        type\n      };\n    }\n  },\n  watch: {\n    getAll() {\n      // console.log(this.detailList)\n      // console.log(\"watch\")\n      if (!this.detailList) return;\n      for (let i = 0; i < this.allids.length; i++) {\n        this.ids.push(...this.allids[i]);\n      }\n      for (let i = 0; i < this.detailList.length; i++) {\n        this.allids.push([]);\n        if (!this.detailList[i].list) continue;\n        let {\n          list\n        } = this.detailList[i];\n        for (let j = 0; j < list.length; j++) {\n          if (this.ids.indexOf(list[j].cid) == -1) {\n            this.no_ids.push(list[j].cid);\n          }\n        }\n      }\n    },\n    detailList() {\n      this.allids = [];\n      for (let i = 0; i < this.detailList.length; i++) {\n        this.allids.push([]);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["props","cid","type","Number","default","detailList","Array","getAll","inject","data","allids","showDialog","showImg","methods","changeCid","index","ls","indexOf","push","splice","imgClass","ids","changeImgCid","btn","watch","i","length","list","j","no_ids"],"sourceRoot":"","sources":["C:\\Users\\yangp\\Desktop\\01-xiaoms\\src\\components\\xiaomengshu\\Illness\\DetailList.vue"],"sourcesContent":["<template>\r\n    <div class=\"detail-bar\">\r\n        <h3>请选择症状</h3>\r\n        <template v-for=\"(item, index) in detailList\" :key=\"item.title\">\r\n            <div class=\"detail-btn\">\r\n                <p>{{ item.title }}:</p>\r\n                <div v-if=\"item.is_img === 0\">\r\n                    <template v-if=\"item.checkbox === 0\">\r\n                        <van-button size=\"small\"\r\n                            :class=\"{ choicebtn: this.allids[index] && (this.allids[index].indexOf(btn.cid) != -1 || this.ids.indexOf(btn.cid) != -1) }\"\r\n                            v-for=\"btn in item.list\" :key=\"btn.cid\" round type=\"default\"\r\n                            @click.prevent=\"changeCid(btn.cid, index, 0)\">{{ btn.title\r\n}}</van-button>\r\n                    </template>\r\n                    <template v-if=\"item.checkbox === 1\">\r\n                        <van-button size=\"small\"\r\n                            :class=\"{ choicebtn: this.allids[index] && (this.allids[index].indexOf(btn.cid) != -1 || this.ids.indexOf(btn.cid) != -1) }\"\r\n                            v-for=\"btn in item.list\" :key=\"btn.cid\" round type=\"default\"\r\n                            @click.prevent=\"changeCid(btn.cid, index, 1)\">{{ btn.title\r\n}}</van-button>\r\n                    </template>\r\n                </div>\r\n                <div v-else class=\"img-bar\">\r\n                    <template v-if=\"item.checkbox === 0\">\r\n                        <div class=\"img-btn\" v-for=\"btn in item.list\" :key=\"btn.cid\" :style=\"{\r\n    backgroundImage: `url(${btn.img})`\r\n}\" @click=\"changeImgCid(btn, index, 2)\">\r\n                            <div v-if=\"imgClass(btn.cid, index)\" class=\"img-btn-shade\">\r\n                                <van-icon name=\"checked\" size=\"2rem\" color=\"#30abb3\" />\r\n                            </div>\r\n                        </div>\r\n                    </template>\r\n                    <template v-if=\"item.checkbox === 1\">\r\n                        <div class=\"img-btn\" v-for=\"btn in item.list\" :key=\"btn.cid\" :style=\"{\r\n    backgroundImage: `url(${btn.img})`\r\n}\" @click=\"changeImgCid(btn, index, 3)\">\r\n                            <div v-if=\"imgClass(btn.cid, index)\" class=\"img-btn-shade\">\r\n                                <van-icon name=\"checked\" size=\"2rem\" color=\"#30abb3\" />\r\n                            </div>\r\n                        </div>\r\n                    </template>\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <van-popup teleport=\"body\" class=\"illness-img-dialog\" v-model:show=\"showDialog\">\r\n            <img :src=\"showImg.img\" />\r\n            <p>{{ showImg.remark }}</p>\r\n            <div>\r\n                <button class=\"cancelbtn\" @click=\"showDialog = false\">不对，再看看其他的</button>\r\n                <button class=\"choicebtn\" @click=\"changeCid(showImg.cid, showImg.index, showImg.type)\">对，就是这个症状</button>\r\n            </div>\r\n        </van-popup>\r\n\r\n    </div>\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        cid: {\r\n            type: Number,\r\n            default: 0,\r\n        },\r\n        detailList: {\r\n            type: Array,\r\n            default: () => [],\r\n        },\r\n        getAll: {\r\n            type: Number,\r\n            default: 0,\r\n        }\r\n    },\r\n    inject: ['ids', 'no_ids'],\r\n    data() {\r\n        return {\r\n            allids: [],\r\n            showDialog: false,\r\n            showImg: {\r\n            }\r\n        };\r\n    },\r\n    methods: {\r\n        changeCid(cid, index, type) {\r\n            // console.log(\"type:\", type)\r\n            if (type === 0) this.allids[index][0] = cid;\r\n            else if (type === 1) {\r\n                let ls = this.allids[index].indexOf(cid);\r\n                if (ls == -1) this.allids[index].push(cid);\r\n                else {\r\n                    this.allids[index].splice(ls, 1);\r\n                }\r\n            }\r\n\r\n            else if (type === 2) {\r\n                this.allids[index][0] = cid;\r\n                this.showDialog = false\r\n            }\r\n            else {\r\n                let ls = this.allids[index].indexOf(cid);\r\n                // console.log(\"ls:\", ls)\r\n                if (ls == -1) this.allids[index].push(cid);\r\n                else {\r\n                    this.allids[index].splice(ls, 1);\r\n                }\r\n                this.showDialog = false\r\n            }\r\n        },\r\n        imgClass(cid, index) {\r\n\r\n            if ((this.allids[index].indexOf(cid) != -1 || this.ids.indexOf(cid) != -1))\r\n                return true\r\n            else\r\n                return false\r\n\r\n        },\r\n        changeImgCid(btn, index, type) {\r\n            if (this.imgClass(btn.cid, index)) {\r\n                this.changeCid(btn.cid, index, btn.type);\r\n                return;\r\n            }\r\n            this.showDialog = true;\r\n            this.showImg = { ...btn, index, type }\r\n        }\r\n    },\r\n    watch: {\r\n        getAll() {\r\n            // console.log(this.detailList)\r\n            // console.log(\"watch\")\r\n            if (!this.detailList)\r\n                return\r\n            for (let i = 0; i < this.allids.length; i++) {\r\n                this.ids.push(...this.allids[i]);\r\n            }\r\n\r\n            for (let i = 0; i < this.detailList.length; i++) {\r\n                this.allids.push([]);\r\n                if (!this.detailList[i].list)\r\n                    continue\r\n                let { list } = this.detailList[i]\r\n                for (let j = 0; j < list.length; j++) {\r\n                    if (this.ids.indexOf(list[j].cid) == -1) {\r\n                        this.no_ids.push(list[j].cid)\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n        },\r\n        detailList() {\r\n            this.allids = [];\r\n            for (let i = 0; i < this.detailList.length; i++) {\r\n                this.allids.push([]);\r\n            }\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail-bar {\r\n    font-size: 1.2rem;\r\n    padding: 0 16px;\r\n\r\n    .detail-btn {\r\n        button {\r\n            margin: 3px 5px;\r\n        }\r\n\r\n        .img-bar {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n\r\n            .img-btn {\r\n                margin: 5px;\r\n                width: 6rem;\r\n                height: 6rem;\r\n                background-size: cover;\r\n                border-radius: 10px;\r\n            }\r\n\r\n            .img-btn-shade {\r\n                display: flex;\r\n                justify-content: center;\r\n                align-items: center;\r\n                width: 100%;\r\n                height: 100%;\r\n                border-radius: 10px;\r\n                background-color: rgba(0, 0, 0, 0.4);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n.choicebtn {\r\n    color: #30abb3;\r\n    border-color: #30abb3;\r\n}\r\n</style>\r\n<style  lang=\"less\">\r\n.illness-img-dialog {\r\n    padding: 20px !important;\r\n    width: 80%;\r\n    border-radius: 20px;\r\n    text-align: center;\r\n\r\n    img {\r\n        width: 100%;\r\n    }\r\n\r\n\r\n    button {\r\n        background-color: white;\r\n        border: 1px solid black;\r\n        border-radius: 20px;\r\n        padding: 1rem 5px;\r\n        font-size: 1rem;\r\n\r\n    }\r\n\r\n    .choicebtn {\r\n        color: #30abb3;\r\n        border-color: #30abb3;\r\n        margin-left: 1.6rem;\r\n    }\r\n\r\n    .cancelbtn {\r\n        color: #9999b3;\r\n        border-color: #9999b3;\r\n    }\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}