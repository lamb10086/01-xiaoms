{"ast":null,"code":"import { getRecommendList } from \"@/api/xiaomengshu\";\nexport default {\n  computed: {\n    pet_type() {\n      return this.$store.getters.pet_type;\n    }\n  },\n  data() {\n    return {\n      columnName: 0,\n      column: [],\n      //广告名字\n      list: [],\n      //推荐列表\n      page: 0,\n      param: 0,\n      loading: false,\n      finished: false,\n      timer: \"\",\n      timerwork: false\n    };\n  },\n  watch: {\n    async pet_type() {\n      let res = await this.getColumn();\n      this.columnName = 0;\n      this.column = res.data.column;\n      this.list = res.data.list;\n    }\n  },\n  async created() {\n    let res = await this.getColumn();\n    this.column = res.data.column;\n    this.list = res.data.list;\n  },\n  methods: {\n    async getColumn(params = {\n      pet_type: this.pet_type,\n      page: this.page,\n      param: this.param\n    }) {\n      let res = await getRecommendList(params);\n      return res;\n    },\n    async changeColumn(item) {\n      let res = await this.getColumn({\n        param: item.param\n      });\n      this.column = res.data.column;\n      this.columnName = (this.columnName + 1) % 2;\n      this.list = res.data.list;\n    },\n    async onLoad() {\n      this.page += 2;\n      if (this.page >= 100) this.finished = true;\n      let res = await this.getColumn();\n      this.list = [...this.list, ...res.data.list];\n      if (!this.timerwork) {\n        this.timer = setTimeout(() => {\n          this.loading = false;\n          this.timerwork = false;\n          clearTimeout(this.timer);\n        }, 6000);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAsDA,SAASA,gBAAe,QAAS,mBAAmB;AACpD,eAAe;EACbC,QAAQ,EAAE;IACRC,QAAQ,GAAG;MACT,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAACF,QAAQ;IACrC;EACF,CAAC;EACDG,IAAI,GAAG;IACL,OAAO;MACLC,UAAU,EAAE,CAAC;MACbC,MAAM,EAAE,EAAE;MAAE;MACZC,IAAI,EAAE,EAAE;MAAE;MACVC,IAAI,EAAE,CAAC;MACPC,KAAK,EAAE,CAAC;MACRC,OAAO,EAAE,KAAK;MACdC,QAAQ,EAAE,KAAK;MACfC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE;IACb,CAAC;EACH,CAAC;EACDC,KAAK,EAAE;IACL,MAAMb,QAAQ,GAAG;MACf,IAAIc,GAAE,GAAI,MAAM,IAAI,CAACC,SAAS,EAAE;MAChC,IAAI,CAACX,UAAS,GAAI,CAAC;MACnB,IAAI,CAACC,MAAK,GAAIS,GAAG,CAACX,IAAI,CAACE,MAAM;MAC7B,IAAI,CAACC,IAAG,GAAIQ,GAAG,CAACX,IAAI,CAACG,IAAI;IAC3B;EACF,CAAC;EACD,MAAMU,OAAO,GAAG;IACd,IAAIF,GAAE,GAAI,MAAM,IAAI,CAACC,SAAS,EAAE;IAChC,IAAI,CAACV,MAAK,GAAIS,GAAG,CAACX,IAAI,CAACE,MAAM;IAC7B,IAAI,CAACC,IAAG,GAAIQ,GAAG,CAACX,IAAI,CAACG,IAAI;EAC3B,CAAC;EACDW,OAAO,EAAE;IACP,MAAMF,SAAS,CACbG,MAAK,GAAI;MAAElB,QAAQ,EAAE,IAAI,CAACA,QAAQ;MAAEO,IAAI,EAAE,IAAI,CAACA,IAAI;MAAEC,KAAK,EAAE,IAAI,CAACA;IAAM,GACvE;MACA,IAAIM,GAAE,GAAI,MAAMhB,gBAAgB,CAACoB,MAAM,CAAC;MACxC,OAAOJ,GAAG;IACZ,CAAC;IACD,MAAMK,YAAY,CAACC,IAAI,EAAE;MACvB,IAAIN,GAAE,GAAI,MAAM,IAAI,CAACC,SAAS,CAAC;QAAEP,KAAK,EAAEY,IAAI,CAACZ;MAAM,CAAC,CAAC;MACrD,IAAI,CAACH,MAAK,GAAIS,GAAG,CAACX,IAAI,CAACE,MAAM;MAC7B,IAAI,CAACD,UAAS,GAAI,CAAC,IAAI,CAACA,UAAS,GAAI,CAAC,IAAI,CAAC;MAC3C,IAAI,CAACE,IAAG,GAAIQ,GAAG,CAACX,IAAI,CAACG,IAAI;IAC3B,CAAC;IACD,MAAMe,MAAM,GAAG;MACb,IAAI,CAACd,IAAG,IAAK,CAAC;MACd,IAAI,IAAI,CAACA,IAAG,IAAK,GAAG,EAAE,IAAI,CAACG,QAAO,GAAI,IAAI;MAC1C,IAAII,GAAE,GAAI,MAAM,IAAI,CAACC,SAAS,EAAE;MAChC,IAAI,CAACT,IAAG,GAAI,CAAC,GAAG,IAAI,CAACA,IAAI,EAAE,GAAGQ,GAAG,CAACX,IAAI,CAACG,IAAI,CAAC;MAC5C,IAAI,CAAC,IAAI,CAACM,SAAS,EAAE;QACnB,IAAI,CAACD,KAAI,GAAIW,UAAU,CAAC,MAAM;UAC5B,IAAI,CAACb,OAAM,GAAI,KAAK;UACpB,IAAI,CAACG,SAAQ,GAAI,KAAK;UACtBW,YAAY,CAAC,IAAI,CAACZ,KAAK,CAAC;QAC1B,CAAC,EAAE,IAAI,CAAC;MACV;IACF;EACF;AACF,CAAC","names":["getRecommendList","computed","pet_type","$store","getters","data","columnName","column","list","page","param","loading","finished","timer","timerwork","watch","res","getColumn","created","methods","params","changeColumn","item","onLoad","setTimeout","clearTimeout"],"sourceRoot":"","sources":["C:\\Code\\VScode\\VUE\\项目\\01-xiaoms\\src\\views\\xiaomengshu\\BottomColumn.vue"],"sourcesContent":["<template>\r\n  <div class=\"bottom-column-bar\">\r\n    <div class=\"bottom-column-top\">\r\n      <span\r\n        v-for=\"item in column\"\r\n        :key=\"item.name\"\r\n        :class=\"item.name == column[columnName].name ? 'choiceSpanActive' : ''\"\r\n        @click=\"changeColumn(item)\"\r\n        >{{ item.name }}</span\r\n      >\r\n    </div>\r\n    <van-list\r\n      v-model:loading=\"loading\"\r\n      :finished=\"finished\"\r\n      finished-text=\"没有更多了\"\r\n      @load=\"onLoad\"\r\n    >\r\n      <div\r\n        v-masonry\r\n        item-selector=\".item\"\r\n        transition-duration=\"0.3s\"\r\n        class=\"bottom-column-bottom\"\r\n        :fit-width=\"false\"\r\n        horizontal-order=\"flase\"\r\n        :resize=\"true\"\r\n        gutter=\"10\"\r\n      >\r\n        <div\r\n          v-for=\"item in list\"\r\n          :key=\"item.data.id\"\r\n          class=\"item\"\r\n          v-masonry-tile\r\n        >\r\n          <img :src=\"item.data.cover.img_url\" alt=\"item.data.cover.img_size\" />\r\n          <span>{{ item.data.title }}</span>\r\n          <div class=\"userIntroduce\">\r\n            <div>\r\n              <van-icon :name=\"item.data.user.avatar.img_url\" size=\"6vw\" />\r\n              <span :style=\"{ width: '10vw' }\">{{\r\n                item.data.user.username\r\n              }}</span>\r\n            </div>\r\n            <div>\r\n              <van-icon name=\"fire-o\" size=\"4vw\" color=\"#e3e3e3\" />\r\n              <span>{{ item.data.viewnums }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </van-list>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getRecommendList } from \"@/api/xiaomengshu\";\r\nexport default {\r\n  computed: {\r\n    pet_type() {\r\n      return this.$store.getters.pet_type;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      columnName: 0,\r\n      column: [], //广告名字\r\n      list: [], //推荐列表\r\n      page: 0,\r\n      param: 0,\r\n      loading: false,\r\n      finished: false,\r\n      timer: \"\",\r\n      timerwork: false,\r\n    };\r\n  },\r\n  watch: {\r\n    async pet_type() {\r\n      let res = await this.getColumn();\r\n      this.columnName = 0;\r\n      this.column = res.data.column;\r\n      this.list = res.data.list;\r\n    },\r\n  },\r\n  async created() {\r\n    let res = await this.getColumn();\r\n    this.column = res.data.column;\r\n    this.list = res.data.list;\r\n  },\r\n  methods: {\r\n    async getColumn(\r\n      params = { pet_type: this.pet_type, page: this.page, param: this.param }\r\n    ) {\r\n      let res = await getRecommendList(params);\r\n      return res;\r\n    },\r\n    async changeColumn(item) {\r\n      let res = await this.getColumn({ param: item.param });\r\n      this.column = res.data.column;\r\n      this.columnName = (this.columnName + 1) % 2;\r\n      this.list = res.data.list;\r\n    },\r\n    async onLoad() {\r\n      this.page += 2;\r\n      if (this.page >= 100) this.finished = true;\r\n      let res = await this.getColumn();\r\n      this.list = [...this.list, ...res.data.list];\r\n      if (!this.timerwork) {\r\n        this.timer = setTimeout(() => {\r\n          this.loading = false;\r\n          this.timerwork = false;\r\n          clearTimeout(this.timer);\r\n        }, 6000);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.bottom-column-bar {\r\n  width: 95vw;\r\n  margin: 0 auto;\r\n  .bottom-column-top {\r\n    display: flex;\r\n    justify-content: space-around;\r\n    font-size: 3vw;\r\n    color: #666666;\r\n  }\r\n  .bottom-column-bottom {\r\n    width: 95vw;\r\n    height: 100%;\r\n    & > div {\r\n      background-color: white;\r\n      margin: 1vw 0;\r\n      border-radius: 10px;\r\n      img {\r\n        // margin: 1vw auto;\r\n        display: block;\r\n        border-radius: 10px;\r\n        width: 45vw;\r\n      }\r\n      & > span {\r\n        margin: 0 auto;\r\n        font-size: 2.5vw;\r\n        padding: 1vw 2vw 3vw 2vw;\r\n        display: block;\r\n        width: 41vw;\r\n      }\r\n    }\r\n    .userIntroduce {\r\n      display: flex;\r\n      justify-content: space-between;\r\n      padding-bottom: 3vw;\r\n      & > div {\r\n        padding: 0 3vw;\r\n        display: flex;\r\n        align-items: center;\r\n        font-size: 1vw;\r\n        i {\r\n          overflow: hidden;\r\n          border-radius: 50%;\r\n        }\r\n        span {\r\n          white-space: nowrap;\r\n          text-overflow: ellipsis;\r\n          display: block;\r\n          overflow: hidden;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.choiceSpanActive {\r\n  font-size: 4vw;\r\n  color: black;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}