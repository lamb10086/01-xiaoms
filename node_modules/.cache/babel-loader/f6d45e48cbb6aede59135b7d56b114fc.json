{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = names => {\n      if (names) {\n        return children.filter(field => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = names => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then(error => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = names => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map(item => item.validate())).then(errors => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = name2 => {\n      const matched = children.find(item => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then(error => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = name2 => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = name2 => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach(item => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some(item => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      form[field.name] = field.formValue.value;\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch(errors => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    const onSubmit = event => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport { stdin_default as default };","map":{"version":3,"names":["createVNode","_createVNode","defineComponent","FORM_KEY","truthProp","numericProp","preventDefault","createNamespace","useChildren","useExpose","name","bem","formProps","colon","Boolean","disabled","readonly","showError","labelWidth","labelAlign","String","inputAlign","scrollToError","validateFirst","submitOnEnter","showErrorMessage","errorMessageAlign","validateTrigger","type","Array","default","stdin_default","props","emits","setup","emit","slots","children","linkChildren","getFieldsByNames","names","filter","field","includes","validateSeq","Promise","resolve","reject","errors","fields","reduce","promise","then","length","validate","error","push","validateAll","all","map","item","validateField","name2","matched","find","resetValidation","forEach","getValidationStatus","form","scrollToField","options","some","$el","scrollIntoView","getValues","formValue","value","submit","values","catch","onSubmit","event","_a","call"],"sources":["C:/Code/VScode/VUE/项目/01-xiaoms/node_modules/vant/es/form/Form.mjs"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { defineComponent } from \"vue\";\nimport { FORM_KEY, truthProp, numericProp, preventDefault, createNamespace } from \"../utils/index.mjs\";\nimport { useChildren } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose.mjs\";\nconst [name, bem] = createNamespace(\"form\");\nconst formProps = {\n  colon: Boolean,\n  disabled: Boolean,\n  readonly: Boolean,\n  showError: Boolean,\n  labelWidth: numericProp,\n  labelAlign: String,\n  inputAlign: String,\n  scrollToError: Boolean,\n  validateFirst: Boolean,\n  submitOnEnter: truthProp,\n  showErrorMessage: truthProp,\n  errorMessageAlign: String,\n  validateTrigger: {\n    type: [String, Array],\n    default: \"onBlur\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: formProps,\n  emits: [\"submit\", \"failed\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const {\n      children,\n      linkChildren\n    } = useChildren(FORM_KEY);\n    const getFieldsByNames = (names) => {\n      if (names) {\n        return children.filter((field) => names.includes(field.name));\n      }\n      return children;\n    };\n    const validateSeq = (names) => new Promise((resolve, reject) => {\n      const errors = [];\n      const fields = getFieldsByNames(names);\n      fields.reduce((promise, field) => promise.then(() => {\n        if (!errors.length) {\n          return field.validate().then((error) => {\n            if (error) {\n              errors.push(error);\n            }\n          });\n        }\n      }), Promise.resolve()).then(() => {\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateAll = (names) => new Promise((resolve, reject) => {\n      const fields = getFieldsByNames(names);\n      Promise.all(fields.map((item) => item.validate())).then((errors) => {\n        errors = errors.filter(Boolean);\n        if (errors.length) {\n          reject(errors);\n        } else {\n          resolve();\n        }\n      });\n    });\n    const validateField = (name2) => {\n      const matched = children.find((item) => item.name === name2);\n      if (matched) {\n        return new Promise((resolve, reject) => {\n          matched.validate().then((error) => {\n            if (error) {\n              reject(error);\n            } else {\n              resolve();\n            }\n          });\n        });\n      }\n      return Promise.reject();\n    };\n    const validate = (name2) => {\n      if (typeof name2 === \"string\") {\n        return validateField(name2);\n      }\n      return props.validateFirst ? validateSeq(name2) : validateAll(name2);\n    };\n    const resetValidation = (name2) => {\n      if (typeof name2 === \"string\") {\n        name2 = [name2];\n      }\n      const fields = getFieldsByNames(name2);\n      fields.forEach((item) => {\n        item.resetValidation();\n      });\n    };\n    const getValidationStatus = () => children.reduce((form, field) => {\n      form[field.name] = field.getValidationStatus();\n      return form;\n    }, {});\n    const scrollToField = (name2, options) => {\n      children.some((item) => {\n        if (item.name === name2) {\n          item.$el.scrollIntoView(options);\n          return true;\n        }\n        return false;\n      });\n    };\n    const getValues = () => children.reduce((form, field) => {\n      form[field.name] = field.formValue.value;\n      return form;\n    }, {});\n    const submit = () => {\n      const values = getValues();\n      validate().then(() => emit(\"submit\", values)).catch((errors) => {\n        emit(\"failed\", {\n          values,\n          errors\n        });\n        if (props.scrollToError && errors[0].name) {\n          scrollToField(errors[0].name);\n        }\n      });\n    };\n    const onSubmit = (event) => {\n      preventDefault(event);\n      submit();\n    };\n    linkChildren({\n      props\n    });\n    useExpose({\n      submit,\n      validate,\n      getValues,\n      scrollToField,\n      resetValidation,\n      getValidationStatus\n    });\n    return () => {\n      var _a;\n      return _createVNode(\"form\", {\n        \"class\": bem(),\n        \"onSubmit\": onSubmit\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}