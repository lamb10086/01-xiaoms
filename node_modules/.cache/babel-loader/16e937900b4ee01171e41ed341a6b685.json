{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, withCtx as _withCtx, vShow as _vShow, withDirectives as _withDirectives, toDisplayString as _toDisplayString, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-296d5853\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"search-nav\"\n};\nconst _hoisted_2 = {\n  class: \"record\"\n};\nconst _hoisted_3 = {\n  class: \"record-left\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"span\", null, [/*#__PURE__*/_createElementVNode(\"b\", null, \"最近搜索\")], -1 /* HOISTED */));\nconst _hoisted_5 = {\n  class: \"record-list\"\n};\nconst _hoisted_6 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_icon = _resolveComponent(\"van-icon\");\n  const _component_van_search = _resolveComponent(\"van-search\");\n  const _component_van_cell = _resolveComponent(\"van-cell\");\n  const _component_van_cell_group = _resolveComponent(\"van-cell-group\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_van_icon, {\n    name: \"arrow-left\",\n    size: \"2rem\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.onClickLeft())\n  }), _createVNode(_component_van_search, {\n    modelValue: $data.searchValue,\n    \"onUpdate:modelValue\": [_cache[1] || (_cache[1] = $event => $data.searchValue = $event), _cache[2] || (_cache[2] = $event => $options.onSearch())],\n    \"show-action\": \"\",\n    placeholder: \"请输入搜索关键词\",\n    onCancel: _cache[3] || (_cache[3] = $event => $options.onClickLeft()),\n    shape: \"round\"\n  }, null, 8 /* PROPS */, [\"modelValue\"])]), _withDirectives(_createElementVNode(\"div\", null, [_createVNode(_component_van_cell_group, null, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.searchList, item => {\n      return _openBlock(), _createBlock(_component_van_cell, {\n        title: item.title,\n        key: item.cid,\n        onClick: _cache[4] || (_cache[4] = $event => $options.toPage1())\n      }, null, 8 /* PROPS */, [\"title\"]);\n    }), 128 /* KEYED_FRAGMENT */))]),\n\n    _: 1 /* STABLE */\n  })], 512 /* NEED_PATCH */), [[_vShow, !$options.searchFocus]]), _withDirectives(_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_van_icon, {\n    name: \"clock-o\",\n    size: \"1.5rem\"\n  }), _hoisted_4]), _createElementVNode(\"div\", {\n    class: \"record-right\",\n    onClick: _cache[5] || (_cache[5] = $event => $options.deleteList())\n  }, [_createVNode(_component_van_icon, {\n    name: \"delete-o\",\n    size: \"2rem\"\n  })])]), _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.recordList, item => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: item,\n      onClick: $event => $options.toRecord(item)\n    }, _toDisplayString(item), 9 /* TEXT, PROPS */, _hoisted_6);\n  }), 128 /* KEYED_FRAGMENT */))])], 512 /* NEED_PATCH */), [[_vShow, $options.searchFocus]])]);\n}","map":{"version":3,"mappings":";;;EAESA,KAAK,EAAC;AAAY;;EAWhBA,KAAK,EAAC;AAAQ;;EACZA,KAAK,EAAC;AAAa;gEAEtBC,oBAAyB,4BAAnBA,oBAAW,WAAR,MAAI;;EAMZD,KAAK,EAAC;AAAa;;;;;;;uBArB5BE,oBAyBM,cAxBJD,oBAIM,OAJNE,UAIM,GAHJC,aAAiEC;IAAvDC,IAAI,EAAC,YAAY;IAACC,IAAI,EAAC,MAAM;IAAEC,OAAK,sCAAEC,oBAAW;MAC3DL,aAC0CM;gBADrBC,iBAAW;gEAAXA,iBAAW,gDAA0DF,iBAAQ;IAAhE,aAAW,EAAX,EAAW;IAACG,WAAW,EAAC,UAAU;IACjEC,QAAM,sCAAEJ,oBAAW;IAAIK,KAAK,EAAC;6DAElCb,oBAIM,cAHJG,aAEiBW;sBADL,MAA0B,oBAApCb,oBAA8Fc,6BAArEL,gBAAU,EAAlBM,IAAI;2BAArBC,aAA8FC;QAAxDC,KAAK,EAAEH,IAAI,CAACG,KAAK;QAAGC,GAAG,EAAEJ,IAAI,CAACK,GAAG;QAAGd,OAAK,sCAAEC,gBAAO;;;;;yCAF9EA,oBAAW,qBAKzBR,oBAaM,cAZJA,oBAQM,OARNsB,UAQM,GAPJtB,oBAGM,OAHNuB,UAGM,GAFJpB,aAAyCC;IAA/BC,IAAI,EAAC,SAAS;IAACC,IAAI,EAAC;MAC9BkB,UAAyB,IAE3BxB,oBAEM;IAFDD,KAAK,EAAC,cAAc;IAAEQ,OAAK,sCAAEC,mBAAU;MAC1CL,aAAwCC;IAA9BC,IAAI,EAAC,UAAU;IAACC,IAAI,EAAC;UAGnCN,oBAEM,OAFNyB,UAEM,sBADJxB,oBAAoFc,6BAAhEP,mBAAU,EAAlBQ,IAAI;yBAAhBf,oBAAoF;MAAnDmB,GAAG,EAAEJ,IAAI;MAAGT,OAAK,YAAEC,iBAAQ,CAACQ,IAAI;wBAAMA,IAAI;sEAXlER,oBAAW","names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_createVNode","_component_van_icon","name","size","onClick","$options","_component_van_search","$data","placeholder","onCancel","shape","_component_van_cell_group","_Fragment","item","_createBlock","_component_van_cell","title","key","cid","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5"],"sourceRoot":"","sources":["C:\\Users\\yangp\\Desktop\\01-xiaoms\\src\\views\\xiaomengshu\\ToolView\\Able\\SearchPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"search-nav\">\r\n      <van-icon name=\"arrow-left\" size=\"2rem\" @click=\"onClickLeft()\" />\r\n      <van-search v-model=\"searchValue\" show-action placeholder=\"请输入搜索关键词\" @update:model-value=\"onSearch()\"\r\n        @cancel=\"onClickLeft()\" shape=\"round\" />\r\n    </div>\r\n    <div v-show=\"!searchFocus\">\r\n      <van-cell-group>\r\n        <van-cell v-for=\"item in searchList\" :title=\"item.title\" :key=\"item.cid\" @click=\"toPage1()\" />\r\n      </van-cell-group>\r\n    </div>\r\n    <div v-show=\"searchFocus\">\r\n      <div class=\"record\">\r\n        <div class=\"record-left\">\r\n          <van-icon name=\"clock-o\" size=\"1.5rem\" />\r\n          <span><b>最近搜索</b> </span>\r\n        </div>\r\n        <div class=\"record-right\" @click=\"deleteList()\">\r\n          <van-icon name=\"delete-o\" size=\"2rem\" />\r\n        </div>\r\n      </div>\r\n      <div class=\"record-list\">\r\n        <div v-for=\"item in recordList\" :key=\"item\" @click=\"toRecord(item)\">{{ item }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAbleList } from \"@/api/xiaomengshu\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchValue: \"\",\r\n      searchList: [],\r\n    };\r\n  },\r\n  inject: [\"able\"],\r\n  created() {\r\n    this.able.showTop = this.able.showSearch = false;\r\n  },\r\n  unmounted() {\r\n    this.able.showTop = this.able.showSearch = true;\r\n  },\r\n  computed: {\r\n    searchFocus() {\r\n      return this.searchValue == \"\";\r\n    },\r\n    recordList() {\r\n      return this.$store.state.ableRecordList;\r\n    },\r\n  },\r\n  methods: {\r\n    onClickLeft() {\r\n      this.$router.back();\r\n    },\r\n    deleteList() {\r\n      this.$store.state.ableRecordList = [];\r\n    },\r\n    async onSearch() {\r\n      let res = await getAbleList({\r\n        ...this.$route.query,\r\n        word: this.searchValue,\r\n      });\r\n      this.searchList = res.data.list;\r\n    },\r\n    toRecord(item) {\r\n      this.searchValue = item;\r\n      this.onSearch();\r\n    },\r\n    toPage1() {\r\n      if (this.recordList.indexOf(this.searchValue) == -1)\r\n        this.recordList.push(this.searchValue);\r\n      if (this.recordList.length > 30) {\r\n        this.recordList.shift();\r\n      }\r\n      this.$router.push({\r\n        name: \"listPage1\",\r\n        query: {\r\n          pettype: this.$store.getters.pet_type,\r\n          word: this.searchValue,\r\n        },\r\n      });\r\n      console.log(\"1-1-1-1-1-\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.search-nav {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-around;\r\n\r\n  .van-search {\r\n    flex: 1;\r\n  }\r\n\r\n  border-bottom: 1px solid #eeeeee;\r\n}\r\n\r\n.record {\r\n  align-items: center;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  padding: 3vw 3vw;\r\n  height: 8vw;\r\n\r\n  span {\r\n    font-size: 1.3rem;\r\n  }\r\n}\r\n\r\n.record-list {\r\n  display: flex;\r\n\r\n  div {\r\n    margin: 2vw 1vw;\r\n    padding: 1vw 5vw;\r\n    border: 1px solid #eeeeee;\r\n    border-radius: 20px;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}