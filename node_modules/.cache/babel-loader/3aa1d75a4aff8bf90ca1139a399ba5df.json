{"ast":null,"code":"import { isDef, clamp, extend, createNamespace } from \"../utils/index.mjs\";\nconst [name, bem, t] = createNamespace(\"picker\");\nconst getFirstEnabledOption = options => options.find(option => !option.disabled) || options[0];\nfunction getColumnsType(columns, fields) {\n  const firstColumn = columns[0];\n  if (firstColumn) {\n    if (Array.isArray(firstColumn)) {\n      return \"multiple\";\n    }\n    if (fields.children in firstColumn) {\n      return \"cascade\";\n    }\n  }\n  return \"default\";\n}\nfunction findIndexOfEnabledOption(options, index) {\n  index = clamp(index, 0, options.length);\n  for (let i = index; i < options.length; i++) {\n    if (!options[i].disabled) return i;\n  }\n  for (let i = index - 1; i >= 0; i--) {\n    if (!options[i].disabled) return i;\n  }\n  return 0;\n}\nconst isOptionExist = (options, value, fields) => value !== void 0 && !!options.find(option => option[fields.value] === value);\nfunction findOptionByValue(options, value, fields) {\n  const index = options.findIndex(option => option[fields.value] === value);\n  const enabledIndex = findIndexOfEnabledOption(options, index);\n  return options[enabledIndex];\n}\nfunction formatCascadeColumns(columns, fields, selectedValues) {\n  const formatted = [];\n  let cursor = {\n    [fields.children]: columns\n  };\n  let columnIndex = 0;\n  while (cursor && cursor[fields.children]) {\n    const options = cursor[fields.children];\n    const value = selectedValues.value[columnIndex];\n    cursor = isDef(value) ? findOptionByValue(options, value, fields) : void 0;\n    if (!cursor && options.length) {\n      const firstValue = getFirstEnabledOption(options)[fields.value];\n      cursor = findOptionByValue(options, firstValue, fields);\n    }\n    columnIndex++;\n    formatted.push(options);\n  }\n  return formatted;\n}\nfunction getElementTranslateY(element) {\n  const {\n    transform\n  } = window.getComputedStyle(element);\n  const translateY = transform.slice(7, transform.length - 1).split(\", \")[5];\n  return Number(translateY);\n}\nfunction assignDefaultFields(fields) {\n  return extend({\n    text: \"text\",\n    value: \"value\",\n    children: \"children\"\n  }, fields);\n}\nexport { assignDefaultFields, bem, findIndexOfEnabledOption, findOptionByValue, formatCascadeColumns, getColumnsType, getElementTranslateY, getFirstEnabledOption, isOptionExist, name, t };","map":{"version":3,"names":["isDef","clamp","extend","createNamespace","name","bem","t","getFirstEnabledOption","options","find","option","disabled","getColumnsType","columns","fields","firstColumn","Array","isArray","children","findIndexOfEnabledOption","index","length","i","isOptionExist","value","findOptionByValue","findIndex","enabledIndex","formatCascadeColumns","selectedValues","formatted","cursor","columnIndex","firstValue","push","getElementTranslateY","element","transform","window","getComputedStyle","translateY","slice","split","Number","assignDefaultFields","text"],"sources":["C:/Users/yangp/Desktop/01-xiaoms/node_modules/vant/es/picker/utils.mjs"],"sourcesContent":["import { isDef, clamp, extend, createNamespace } from \"../utils/index.mjs\";\r\nconst [name, bem, t] = createNamespace(\"picker\");\r\nconst getFirstEnabledOption = (options) => options.find((option) => !option.disabled) || options[0];\r\nfunction getColumnsType(columns, fields) {\r\n  const firstColumn = columns[0];\r\n  if (firstColumn) {\r\n    if (Array.isArray(firstColumn)) {\r\n      return \"multiple\";\r\n    }\r\n    if (fields.children in firstColumn) {\r\n      return \"cascade\";\r\n    }\r\n  }\r\n  return \"default\";\r\n}\r\nfunction findIndexOfEnabledOption(options, index) {\r\n  index = clamp(index, 0, options.length);\r\n  for (let i = index; i < options.length; i++) {\r\n    if (!options[i].disabled)\r\n      return i;\r\n  }\r\n  for (let i = index - 1; i >= 0; i--) {\r\n    if (!options[i].disabled)\r\n      return i;\r\n  }\r\n  return 0;\r\n}\r\nconst isOptionExist = (options, value, fields) => value !== void 0 && !!options.find((option) => option[fields.value] === value);\r\nfunction findOptionByValue(options, value, fields) {\r\n  const index = options.findIndex((option) => option[fields.value] === value);\r\n  const enabledIndex = findIndexOfEnabledOption(options, index);\r\n  return options[enabledIndex];\r\n}\r\nfunction formatCascadeColumns(columns, fields, selectedValues) {\r\n  const formatted = [];\r\n  let cursor = {\r\n    [fields.children]: columns\r\n  };\r\n  let columnIndex = 0;\r\n  while (cursor && cursor[fields.children]) {\r\n    const options = cursor[fields.children];\r\n    const value = selectedValues.value[columnIndex];\r\n    cursor = isDef(value) ? findOptionByValue(options, value, fields) : void 0;\r\n    if (!cursor && options.length) {\r\n      const firstValue = getFirstEnabledOption(options)[fields.value];\r\n      cursor = findOptionByValue(options, firstValue, fields);\r\n    }\r\n    columnIndex++;\r\n    formatted.push(options);\r\n  }\r\n  return formatted;\r\n}\r\nfunction getElementTranslateY(element) {\r\n  const { transform } = window.getComputedStyle(element);\r\n  const translateY = transform.slice(7, transform.length - 1).split(\", \")[5];\r\n  return Number(translateY);\r\n}\r\nfunction assignDefaultFields(fields) {\r\n  return extend(\r\n    {\r\n      text: \"text\",\r\n      value: \"value\",\r\n      children: \"children\"\r\n    },\r\n    fields\r\n  );\r\n}\r\nexport {\r\n  assignDefaultFields,\r\n  bem,\r\n  findIndexOfEnabledOption,\r\n  findOptionByValue,\r\n  formatCascadeColumns,\r\n  getColumnsType,\r\n  getElementTranslateY,\r\n  getFirstEnabledOption,\r\n  isOptionExist,\r\n  name,\r\n  t\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}